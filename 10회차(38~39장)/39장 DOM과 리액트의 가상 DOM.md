# 39장 DOM과 리액트의 가상 DOM

## 1. DOM (Document Object Model)

### 1.1 DOM이란?

DOM은 HTML, XML 문서의 구조를 계층 트리 형태로 표현하는 인터페이스이다. 브라우저는 이 DOM 트리를 이용해 웹 페이지를 렌더링하며, JavaScript를 통해 DOM 요소를 동적으로 조작할 수 있다.

### 1.2 DOM의 문제점

- **비효율적인 업데이트**: DOM을 조작할 때마다 브라우저가 페이지의 레이아웃을 다시 계산하고, 화면을 다시 렌더링하게 된다. 이 과정은 성능 상의 오버헤드를 초래할 수 있다.
- **빈번한 렌더링**: DOM 변경이 잦으면 페이지의 일부 또는 전체를 빈번하게 다시 렌더링하여 성능 저하가 발생할 수 있다.

### 1.3 DOM의 주요 특징

- **실시간 변경 반영**: DOM은 브라우저에서 실시간으로 변경 사항을 반영하며, 브라우저는 즉시 해당 변경 사항을 렌더링한다.
- **노드 기반 구조**: DOM 트리는 각 HTML 요소와 그 요소 안의 내용이 각각 노드로 구성된 트리 구조를 가진다.

## 2. 가상 DOM (Virtual DOM)

### 2.1 가상 DOM이란?

가상 DOM은 실제 DOM의 경량화된 복사본으로, **`메모리 상에서 유지되는 추상적인 표현`**이다. 리액트와 같은 라이브러리에서 가상 DOM을 사용하여 UI의 변경 사항을 빠르게 계산하고, 최소한의 변경만을 실제 DOM에 반영한다.

### 2.2 가상 DOM의 동작 방식

1. **변경 사항 계산**: 리액트 컴포넌트에서 상태나 데이터가 변경되면, 리액트는 `새**로운 가상 DOM을 생성**`하여 변경된 부분을 찾는다.
2. **최소 업데이트 계산**: 이전 가상 DOM과 새로운 가상 DOM을 비교하여, 변경된 부분을 최소한으로 추출하는 **`diffing** 알고리즘`을 실행한다.
3. **DOM 업데이트**: `변경된 가상 DOM 부분만 실제 DOM에 적용`하여 업데이트한다. 이 과정을 **`reconciliation`**이라고 한다.

### 2.3 가상 DOM의 장점

- **성능 최적화**: 가상 DOM은 최소한의 DOM 조작만 수행하기 때문에 성능 상의 이점을 제공한다.
- **효율적인 업데이트**: 변경 사항을 메모리 상에서 계산한 후, 필요할 때만 실제 DOM에 반영하여 브라우저 렌더링을 최소화한다.
- **추상화된 인터페이스**: 가상 DOM을 사용함으로써 개발자는 직접 DOM을 다루지 않고도 인터페이스를 조작할 수 있다.

## 3. DOM과 가상 DOM의 비교

| **항목** | **DOM** | **가상 DOM** |
| --- | --- | --- |
| **구조** | 브라우저가 제공하는 **실시간 트리** | 메모리 상에서 관리되는 **추상 트리** |
| **업데이트 방식** | 즉각적으로 실제 DOM을 수정 | 가상 DOM에서 변경 사항 계산 후 최소 변경만 실제 DOM에 반영 |
| **성능** | 빈번한 렌더링으로 성능 저하 가능 | 최소화된 업데이트로 성능 최적화 |
| **렌더링 효율성** | 전체 DOM을 빈번히 다시 그릴 수 있음 | 변경된 부분만 렌더링 |
| **사용 목적** | 브라우저에서 실시간 UI 조작 | 리액트와 같은 라이브러리에서 효율적인 UI 업데이트 |
| **diffing 알고리즘** | 지원하지 않음 | 리액트의 diffing 알고리즘으로 최적화된 업데이트 수행 |

## 4. 왜 리액트는 가상 DOM을 사용하는가?

리액트는 UI 성능을 최적화하고, 개발자 경험을 개선하기 위해 가상 DOM을 사용한다. 가상 DOM 덕분에 개발자는 데이터나 상태 변경에만 집중할 수 있고, 리액트는 UI의 효율적인 업데이트를 자동으로 처리해 준다. 가상 DOM을 사용함으로써 직접 DOM을 다루는 복잡성을 줄이고, 성능 최적화를 통해 대규모 애플리케이션에서도 원활한 UI를 유지할 수 있다.

## 5. 결론

DOM은 웹 페이지를 구조화하고 조작하는 기본적인 인터페이스이지만, 성능 최적화에 대한 한계를 가진다. 이에 비해 리액트의 가상 DOM은 변경 사항을 효율적으로 관리하고, 최소한의 실제 DOM 업데이트로 성능을 크게 향상시킨다. 특히, 대규모 애플리케이션이나 빈번한 UI 업데이트가 필요한 상황에서 가상 DOM의 장점이 극대화된다.
